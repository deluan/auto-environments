#!/usr/bin/env ruby

require 'yaml'
Dir['./lib/*.rb'].each {|file| require file }

Dir['./environments/*.yml'].each { |filename|
    puts "\n#{filename}\n===================="

    env_file = File.new filename
    environment = Environment.new env_file

    env_name = File.basename(env_file.path, '.yml')

    puts "hosts:\n"
    hosts_path = environment.create_inventory InventoryFile.new 'petshop.example.com', env_name
    hosts_file = File.new hosts_path, 'r'
    puts hosts_file.read

    puts "\nplaybook.yml:\n"
    playbook_path = environment.create_playbook PlaybookFile.new 'petshop.example.com', env_name
    playbook_file = File.new playbook_path, 'r'
    puts playbook_file.read
}
